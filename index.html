<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë³´ì•ˆêµ­ ë²Œê¸ˆ ê³„ì‚°ê¸°</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f9f9f9;
      padding: 30px;
      max-width: 1000px;
      margin: auto;
    }
    h1 {
      text-align: center;
      font-size: 26px;
    }
    .category {
      margin-top: 30px;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }
    .category h2 {
      font-size: 20px;
      display: flex;
      align-items: center;
    }
    .category h2::before {
      content: "ğŸ•‹";
      margin-right: 6px;
    }
    .item-buttons {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .item-buttons button {
      padding: 14px 20px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: white;
      cursor: pointer;
    }
    .item-buttons button:hover {
      background: #eee;
    }
    .item-with-qty input[type="number"] {
      width: 100px;
      padding: 6px;
      font-size: 16px;
      margin: 0 6px;
    }
    button.reset-btn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
      margin-top: 20px;
    }
    li {
      padding: 10px 0;
      font-size: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .remove-btn {
      background-color: #ff6666;
      border: none;
      border-radius: 6px;
      padding: 6px 10px;
      font-size: 16px;
      color: white;
      cursor: pointer;
    }
    .remove-btn:hover {
      background-color: #cc0000;
    }
    #total {
      font-weight: bold;
      margin-top: 20px;
      font-size: 20px;
      text-align: right;
    }
  </style>
</head>
<body>

  <h1>ë³´ì•ˆêµ­ ë²Œê¸ˆ ê³„ì‚°ê¸°</h1>

  <div class="category">
    <h2>ìŠ¤í† ë¦¬RP</h2>
    <div class="item-buttons">
      <button onclick="addItem('ë¶ìª½ ì€í–‰', 180000000)">ë¶ìª½ ì€í–‰ (â‚©180,000,000)</button>
      <button onclick="addItem('ë¶ìª½ í¸ì˜ì ', 80000000)">ë¶ìª½ í¸ì˜ì  (â‚©80,000,000)</button>
      <button onclick="addItem('ë¶ìª½ ATM', 80000000)">ë¶ìª½ ATM (â‚©80,000,000)</button>
    </div>
  </div>

  <div class="category">
    <h2>ë„ë¡œêµí†µ</h2>
    <div class="item-buttons">
      <button onclick="addMinorViolation('ì†ë„ìœ„ë°˜', 5000000)">ì†ë„ìœ„ë°˜ (â‚©5,000,000)</button>
      <button onclick="addMinorViolation('ì°¨ì„ ìœ„ë°˜', 5000000)">ì°¨ì„ ìœ„ë°˜ (â‚©5,000,000)</button>
      <button onclick="addMinorViolation('ì‹ í˜¸ìœ„ë°˜', 5000000)">ì‹ í˜¸ìœ„ë°˜ (â‚©5,000,000)</button>
      <button onclick="addMinorViolation('ì¸ë„ì£¼í–‰', 5000000)">ì¸ë„ì£¼í–‰ (â‚©5,000,000)</button>
      <button onclick="addMinorViolation('ë¶ˆë²•ìœ í„´', 5000000)">ë¶ˆë²•ìœ í„´ (â‚©5,000,000)</button>
      <button onclick="addMinorViolation('ì—­ì£¼í–‰', 5000000)">ì—­ì£¼í–‰ (â‚©5,000,000)</button>
      <button onclick="addItem('ê³µê³µê¸°ë¬¼ íŒŒì†', 5000000)">ê³µê³µê¸°ë¬¼ íŒŒì† (â‚©5,000,000)</button>
      <button onclick="addItem('ìŠ¤í„´íŠ¸', 7000000)">ìŠ¤í„´íŠ¸ (â‚©7,000,000)</button>
      <button onclick="addItem('ëº‘ì†Œë‹ˆ', 30000000)">ëº‘ì†Œë‹ˆ (â‚©30,000,000)</button>
    </div>
  </div>

  <div class="category">
    <h2>í­í–‰ ë° ì‚´ì¸</h2>
    <div class="item-buttons">
      <button onclick="addItem('í­í–‰', 30000000)">í­í–‰ (â‚©30,000,000)</button>
      <button onclick="addItem('ì‚´ì¸ë¯¸ìˆ˜', 30000000)">ì‚´ì¸ë¯¸ìˆ˜ (â‚©30,000,000)</button>
      <button onclick="addItem('ëª…ì˜ˆíšŒì†', 30000000)">ëª…ì˜ˆíšŒì† (â‚©30,000,000)</button>
      <button onclick="addItem('ì‚´ì¸', 50000000)">ì‚´ì¸ (â‚©50,000,000)</button>
    </div>
  </div>

  <div class="category">
    <h2>ì ˆë„ ë° ì‚¬ê¸°</h2>
    <div class="item-buttons">
      <button onclick="addItem('ì°¨ëŸ‰ì ˆë„', 40000000)">ì°¨ëŸ‰ì ˆë„ (â‚©40,000,000)</button>
      <button onclick="addItem('ìí•´ê³µê°ˆ', 30000000)">ìí•´ê³µê°ˆ (â‚©30,000,000)</button>
      <button onclick="addItem('ê¸ˆì „ ë° ë¬¼í’ˆì‚¬ê¸°', 20000000)">ê¸ˆì „ ë° ë¬¼í’ˆì‚¬ê¸° (â‚©20,000,000)</button>
    </div>
  </div>

  <div class="category">
    <h2>ê³µë¬´ì› ê´€ë ¨</h2>
    <div class="item-buttons">
      <button onclick="addItem('ê³µë¬´ì› ì°¨ëŸ‰ íŒŒì†', 50000000)">ê³µë¬´ì› ì°¨ëŸ‰ íŒŒì† (â‚©50,000,000)</button>
      <button onclick="addItem('ê³µë¬´ì› ì°¨ëŸ‰ íƒˆì·¨ ë¯¸ìˆ˜', 30000000)">ê³µë¬´ì› ì°¨ëŸ‰ íƒˆì·¨ ë¯¸ìˆ˜ (â‚©30,000,000)</button>
      <button onclick="addItem('ê³µë¬´ì› ì°¨ëŸ‰ íƒˆì·¨', 50000000)">ê³µë¬´ì› ì°¨ëŸ‰ íƒˆì·¨ (â‚©50,000,000)</button>
      <button onclick="addItem('ê³µë¬´ì› ëª…ì˜ˆíšŒì†', 20000000)">ê³µë¬´ì› ëª…ì˜ˆíšŒì† (â‚©20,000,000)</button>
      <button onclick="addItem('ê³µë¬´ì› ì‚´ì¸ë¯¸ìˆ˜', 20000000)">ê³µë¬´ì› ì‚´ì¸ë¯¸ìˆ˜ (â‚©20,000,000)</button>
      <button onclick="addItem('ê³µë¬´ì› ì§€ì‹œë¶ˆì´í–‰', 20000000)">ê³µë¬´ì› ì§€ì‹œë¶ˆì´í–‰ (â‚©20,000,000)</button>
      <button onclick="addItem('ê³µë¬´ì› ì‚¬ìœ ì§€ ì¹¨ë²”', 20000000)">ê³µë¬´ì› ì‚¬ìœ ì§€ ì¹¨ë²” (â‚©20,000,000)</button>
    </div>
  </div>

  <div class="category">
    <h2>ë¶ˆë²• ë¬¼í’ˆ</h2>
    <div class="item-buttons">
      <button onclick="addItem('ë¶ˆë²•ë¬¼í’ˆ ìœ í†µ', 40000000)">ë¶ˆë²•ë¬¼í’ˆ ìœ í†µ (â‚©40,000,000)</button>
      <button onclick="addItem('ë¶ˆë²•ë¬´ê¸° ì†Œì§€', 30000000)">ë¶ˆë²•ë¬´ê¸° ì†Œì§€ (â‚©30,000,000)</button>
    </div>
  </div>

  <div class="category">
    <h2>ë³´ì„ê¸ˆ</h2>
    <div class="item-buttons">
      <div class="item-with-qty">
        <label style="margin-right: 10px;">ë³´ì„ê¸ˆ (ë‹¨ê°€ â‚©5,000,000):</label>
        <input type="number" id="bailQty1" placeholder="êµ¬ê¸ˆ ë¶„ìˆ˜" min="1">
        <input type="number" id="bailQty2" placeholder="ì¸ì› ìˆ˜" min="1">
        <button onclick="addFixedBail()">ì¶”ê°€</button>
        <button onclick="resetBailInputs()">ë¦¬ì…‹</button>
      </div>
    </div>
  </div>

  <button class="reset-btn" onclick="resetAll()">ì „ì²´ ì´ˆê¸°í™”</button>

  <ul id="item-list"></ul>
  <div id="total">ì´ í•©ê³„: â‚©0</div>

  <script>
    let items = [];
    let total = 0;
    let minorViolations = [];

    const minorViolationList = [
      "ì†ë„ìœ„ë°˜", "ì°¨ì„ ìœ„ë°˜", "ì‹ í˜¸ìœ„ë°˜",
      "ì¸ë„ì£¼í–‰", "ë¶ˆë²•ìœ í„´", "ì—­ì£¼í–‰"
    ];

    function addItem(name, price) {
      items.push({ name, price });
      total += price;
      handleAutoBailQty(name); // ìë™ ì…ë ¥ ì²˜ë¦¬
      updateDisplay();
    }

    function handleAutoBailQty(name) {
  const bailMap = {
    "ë¶ìª½ ì€í–‰": 30,
    "ë¶ìª½ í¸ì˜ì ": 20,
    "ë¶ìª½ ATM": 20,
    "ë‚œí­ìš´ì „": 20,
    "ëº‘ì†Œë‹ˆ": 20,
    "ì‚´ì¸": 30,
    "ì°¨ëŸ‰ì ˆë„": 30,
    "ìí•´ê³µê°ˆ": 20,
    "ê¸ˆì „ ë° ë¬¼í’ˆì‚¬ê¸°": 30,
    "ê³µë¬´ì› ì°¨ëŸ‰ íŒŒì†": 30,
    "ê³µë¬´ì› ì°¨ëŸ‰ íƒˆì·¨ ë¯¸ìˆ˜": 15,
    "ê³µë¬´ì› ì°¨ëŸ‰ íƒˆì·¨": 30,
    "ê³µë¬´ì› ëª…ì˜ˆíšŒì†": 20,
    "ê³µë¬´ì› ì‚´ì¸ë¯¸ìˆ˜": 20,
    "ê³µë¬´ì› ì§€ì‹œë¶ˆì´í–‰": 10,
    "ê³µë¬´ì› ì‚¬ìœ ì§€ ì¹¨ë²”": 30,
    "ë¶ˆë²•ë¬¼í’ˆ ìœ í†µ": 40,
    "ë¶ˆë²•ë¬´ê¸° ì†Œì§€": 20,
  };

  if (bailMap.hasOwnProperty(name)) {
    setBailQty1(bailMap[name]);
  }
}

    function setBailQty1(value) {
      document.getElementById("bailQty1").value = value;
    }

    function addMinorViolation(name, price) {
      addItem(name, price);

      if (!minorViolations.includes(name)) {
        minorViolations.push(name);
      }

      if (minorViolations.length >= 3) {
        const alreadyExists = items.some(item => item.name === "ë‚œí­ìš´ì „");
        if (!alreadyExists) {
          // ê¸°ì¡´ minor í•­ëª©ë“¤ ì œê±°
          minorViolations.forEach(v => {
            const idx = items.findIndex(item => item.name === v);
            if (idx !== -1) {
              total -= items[idx].price;
              items.splice(idx, 1);
            }
          });

          addItem("ë‚œí­ìš´ì „", 20000000);
          updateDisplay();
          minorViolations = [];
        }
      }
    }

    function addFixedBail() {
      const qty1 = parseInt(document.getElementById("bailQty1").value);
      const qty2 = parseInt(document.getElementById("bailQty2").value);
      const unitPrice = 5000000;

      if (!isNaN(qty1) && qty1 > 0 && !isNaN(qty2) && qty2 > 0) {
        const totalPrice = unitPrice * qty1 * qty2;
        addItem(`ë³´ì„ê¸ˆ x${qty1} x${qty2}`, totalPrice);
      } else {
        alert("ìˆ«ìë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      }
    }

    function resetBailInputs() {
      document.getElementById("bailQty1").value = "";
      document.getElementById("bailQty2").value = "";
    }

    function formatKoreanCurrency(value) {
      return `â‚©${value.toLocaleString('ko-KR')}`;
    }

    function removeItem(index) {
      total -= items[index].price;
      items.splice(index, 1);
      updateDisplay();
    }

    function resetAll() {
      items = [];
      total = 0;
      minorViolations = [];
      updateDisplay();
      resetBailInputs();
    }

    function updateDisplay() {
      const list = document.getElementById("item-list");
      list.innerHTML = "";

      items.forEach((item, index) => {
        const li = document.createElement("li");
        li.innerHTML = `${item.name} - ${formatKoreanCurrency(item.price)} <button class="remove-btn" onclick="removeItem(${index})">âŒ</button>`;
        list.appendChild(li);
      });

      document.getElementById("total").textContent = `ì´ í•©ê³„: ${formatKoreanCurrency(total)}`;
    }
  </script>

</body>
</html>
